<!DOCTYPE html>
<html lang="en"> 
<head>
    <meta charset="UTF-8">
    <title> Asinhrone funkcije </title>
</head>
<body>
    <h3> Get zahtev sa async </h3>
    <script type="text/javascript">

        // primetimo da ova hhtpGet funkcija ne mora da bude oznacena sa async zato sto 
        // nigde u njoj ne koristimo await
        function httpGet(url){
            return fetch(url).then(function(response){
                return response.json();
            });
        }


        async function doStuff(){

            // get zahtev u try catch
            try{
                const students = await httpGet('./07_students.json');
                for (const student of students){
                    const node = document.createElement("p");
                    node.appendChild(
                        document.createTextNode(`${student.name} ${student.surname} ${student.index}`)
                    );
                    document.body.appendChild(node);
                }
            } catch{
                console.log("doslo je do greske: " + err.message);
            }

        }


        doStuff();

    </script>
</body>
</html>