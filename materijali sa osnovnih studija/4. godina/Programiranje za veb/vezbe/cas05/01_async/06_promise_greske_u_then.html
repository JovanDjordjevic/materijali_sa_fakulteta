<!DOCTYPE html>
<html lang="en"> 
<head>
    <meta charset="UTF-8">
    <title> Asinhrono prigramiranje </title>
</head>
<body>
    <h3> Obrada izuzuzetaka u slucaju vise then metoda </h3>
    <script type="text/javascript">

        const promise = new Promise(function(resolve, reject){
            resolve(0);
        });


        // ako negde imamo throw, on ce se propagirati skroz dole do catch (?)
        promise
            .then(function(value){      // ovde se nece desiti throw
                if(value > 0){
                    throw new Error("vrednost je >0");
                }
                document.body.appendChild(document.createTextNode(value + ", "));
                return value + 1;
            })
            .then(function(value){      // ovde ce se  izbaciti throw!
                if(value > 0){
                    throw new Error("vrednost je >0");
                }
                document.body.appendChild(document.createTextNode(value + ", "));
                return value + 1;
            })
            .then(function(value){  // ovaj then nece ni da se izvrsi
                if(value > 0){
                    throw new Error("vrednost je >0");
                }
                document.body.appendChild(document.createTextNode(value + ", "));
            })
            .catch(function(reason){   // i greska ce biti uhvacena ovde
                document.body.appendChild(document.createTextNode("-->catch: " + reason));
            })

    </script>
</body>
</html>